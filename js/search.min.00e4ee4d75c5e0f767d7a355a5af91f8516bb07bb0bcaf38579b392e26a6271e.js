(function(){"use strict";const e=new FlexSearch.Document({document:{id:"id",index:["title","tags","content","date"],store:["title","summary","date","permalink"]}});function n(e){const s=document.querySelector("template").content,t=document.createDocumentFragment(),n=document.querySelector(".search-results");n.textContent="";for(const a in e){const n=e[a],o=s.cloneNode(!0),i=o.querySelector("a"),r=o.querySelector("time"),c=o.querySelector(".content");i.innerHTML=n.title,i.href=n.permalink,r.innerText=n.date,c.innerHTML=n.summary,t.appendChild(o)}n.appendChild(t)}function t(){const s=document.querySelector(".search-text").value.trim(),o=e.search({query:s,enrich:!0,limit:20}),t={};o.forEach(function(e){e.result.forEach(function(e){t[e.id]=e.doc})}),n(t)}function s(){const e=document.querySelector(".search-form");e.addEventListener("submit",function(e){e.preventDefault(),t()}),e.addEventListener("input",function(){t()}),document.querySelector(".search-loading").classList.add("hidden"),document.querySelector(".search-input").classList.remove("hidden"),document.querySelector(".search-text").focus()}function o(){document.querySelector(".search-loading").classList.remove("hidden"),fetch("/searchindex.json").then(function(e){return e.json()}).then(function(t){t.forEach(function(t){e.add(t)})})}o(),s()})()